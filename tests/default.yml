---

- name: install openssh on docker container
  hosts: localhost
  tasks:
  - name: install openssh
    yum: name=openssh-server state=present update_cache=yes
    ignore_errors: true

  - name: install openssh
    apt: name=openssh-server state=present update_cache=yes
    ignore_errors: true

  - name: create privilege separation dir
    file: path="/var/run/sshd" state=directory

- name: wrapper playbook for kitchen testing "ansible-ssh-hardening" with custom settings
  hosts: localhost
  roles:
    - ansible-ssh-hardening
  vars:
    network_ipv6_enable: true
    ssh_allow_root_with_key: true
    ssh_client_password_login: true
    ssh_client_cbc_required: true
    ssh_server_weak_hmac: true
    ssh_client_weak_kex: true

- name: wrapper playbook for kitchen testing "ansible-ssh-hardening" with default settings
  hosts: localhost
  roles:
    - ansible-ssh-hardening
